<html>
    <head>
        <script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=t75lm1s2nf&amp;submodules=geocoder"></script>
        <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    </head>
    <body>
        <div style="margin-top: 20px; margin-bottom: 10px; font-weight: bold;">
        오늘시장가
        </div>
        <div id ="map" style="width:100%; height:80%"></div>
    </body>
    <script>
        $(document).ready(function(){
            //지도를 삽입할 HTML 요소 또는 HTML 요소의 id를 지정합니다.
            var map = new naver.maps.Map('map', {
            center: new naver.maps.LatLng(37.5666805, 126.9784147),
            zoom: 16,
            mapTypeId: naver.maps.MapTypeId.NORMAL
            });

            var infowindow = new naver.maps.InfoWindow();

            function onSuccessGeolocation(position) {
                var location = new naver.maps.LatLng(position.coords.latitude,
                                                    position.coords.longitude);

                map.setCenter(location); // 얻은 좌표를 지도의 중심으로 설정합니다.
                map.setZoom(16); // 지도의 줌 레벨을 변경합니다.

                infowindow.setContent('<div style="padding:20px;">' + '나의 현재 위치' + '</div>');

                infowindow.open(map, location);
                console.log('Coordinates: ' + location.toString());
            }

            function onErrorGeolocation() {
                var center = map.getCenter();

                infowindow.setContent('<div style="padding:20px;">' +
                    '<h5 style="margin-bottom:5px;color:#f00;">Geolocation failed!</h5>'+ "latitude: "+ center.lat() +"<br />longitude: "+ center.lng() +'</div>');

                infowindow.open(map, center);
            }

            $(window).on("load", function() {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(onSuccessGeolocation, onErrorGeolocation);
                } else {
                    var center = map.getCenter();
                    infowindow.setContent('<div style="padding:20px;"><h5 style="margin-bottom:5px;color:#f00;">Geolocation not supported</h5></div>');
                    infowindow.open(map, center);
                }
            });
            
        });
    </script>
</html>